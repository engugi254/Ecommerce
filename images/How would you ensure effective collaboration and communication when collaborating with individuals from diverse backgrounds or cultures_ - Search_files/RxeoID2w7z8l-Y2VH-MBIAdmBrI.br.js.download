(function(){function i(u){var w,b,k,d,g,nt,tt,it,rt,ut,ft,et,ot,st,ki,ti,ui,lt,p,a,ei,f,oi,si,at,hi,ci,v,li,ai,vi,l,vt,h,c,yt,y,pt;CIB.config.features.enableEmbeddedPerf&&(CIB.manager.perfTracker.markEvent("QueryEntered"),CIB.manager.perfTracker.markEvent("RequestSend"));sj_evt.unbind("sydFSCLoaded",i);var wt=_ge("b_pole"),bt=wt&&wt.querySelector("#"+t)!=null,kt=_ge("b_results"),dt=kt&&kt.querySelector("#"+t)!=null;Log.Log("ClientInst","Codex","TigerExists"+(bt?"Pole":dt?"Top":"RR"));var gt=_w._sydPaywallStatus,yi=_w._sydNoTigerSugg,pi=SydFSCHelper.getConfigOrDefault(_w._isMobile,!1),wi=SydFSCHelper.getConfigOrDefault(_w._enableCachedHiddenText,!0),bi=SydFSCHelper.getConfigOrDefault(_w._ignoreFirstOffStage,!1),o=_ge(t),ni=_ge("b_sydtgload");if(o&&ni&&o.removeChild(ni),u){SydFSCHelper.setConfigs();n=CIB.insertAt(o);CIB.onSerpSlotSuggestionInvoked(function(){sj_evt.fire("showSydFSC")});gt=="waitlist"&&(ki=(k=(b=(w=_d.querySelector("#b_sydTigerCont cib-serp"))===null||w===void 0?void 0:w.shadowRoot)===null||b===void 0?void 0:b.querySelector("cib-conversation"))===null||k===void 0?void 0:k.shadowRoot,l=sj_ce("style"),l.textContent='\n                    cib-suggestion-bar {\n                        display: none;\n                    }\n                    :host([serp-slot="pole"]) .content .main, :host([serp-slot="top"]) .content .main, :host([serp-slot="right-rail"]) .content .main {\n                        padding-bottom: 20px;\n                    }\n                ')}else bi&&(SydFSCHelper.ignoreFirstOffStage=!0),SydFSCHelper.isSmoothConvSwitchUpdatedPage()&&((nt=(g=(d=CIB===null||CIB===void 0?void 0:CIB.vm)===null||d===void 0?void 0:d.conversation)===null||g===void 0?void 0:g.turns)===null||nt===void 0?void 0:nt.length)&&(CIB.config.sydney.slottedModeTurnIndex=Math.max(CIB.vm.conversation.turns.length-1,0)),n=sj_ce("cib-serp"),o.appendChild(n);ti=bt||pi?"pole":dt?"top":"right-rail";n.setAttribute("serp-slot",ti);n.setAttribute("alignment","left");n.setAttribute("mode","search");var ht=_w._sydCachedString,di=_w._sydTigerRRStyleUpdate,gi=SydFSCHelper.getConfigOrDefault(_w._enableCachedAttr,!1),nr=SydFSCHelper.getConfigOrDefault(_w._enableCachedOrig,!1),tr=SydFSCHelper.getConfigOrDefault(_w._enableSuggVisibleFix,!1),ir=SydFSCHelper.getConfigOrDefault(_w._enableTigerNeutralBackground,!1),ii=new URLSearchParams(_w===null||_w===void 0?void 0:_w.location.search),rr=ii.has("shareId"),ur=ii.has("convid");if(!rr&&!ur&&SydFSCHelper.enableCreatorSendQueryWhenShowConvQuery&&!SydFSCHelper.isSmoothConvSwitchUpdatedPage()){var ct=SydFSCHelper.getConfigOrDefault((tt=_w._sydConvConfig)===null||tt===void 0?void 0:tt.enableSemSerpNoCache,!1),fr=SydFSCHelper.getConfigOrDefault(_w._enableModeHide,!1),ri=SydFSCHelper.getConfigOrDefault(_w._enableSemSerpAds,!1);if(fr&&!ri){CIB.config.features.enableAds=!1;CIB.onModeChanging(function(n){CIB.config.features.enableAds=n==="conversation"})}else if(ri){CIB.config.features.enableAds=!0;CIB.config.features.enableInlineAds=!1;CIB.onModeChanging(function(n){CIB.config.features.enableInlineAds=n==="conversation"})}if(ui=SydFSCHelper.getConfigOrDefault(_w._disableSemSerpAnswerCards,!1),ui){CIB.config.features.enableAnswerCards=!1;CIB.onModeChanging(function(n){CIB.config.features.enableAnswerCards=n==="conversation"})}if(ct)CIB.onStreamingComplete(function(){var n=CIB.config.sydney.request.optionsSets.indexOf("nocacheread");n>=0&&CIB.config.sydney.request.optionsSets.splice(n,1)});if(tr){lt=!1;CIB.onStreamingComplete(function(){lt||sb_st(function(){var n,t,i,r,u=(r=(i=(t=(n=_d.querySelector("#b_sydTigerCont cib-serp"))===null||n===void 0?void 0:n.shadowRoot)===null||t===void 0?void 0:t.querySelector("cib-conversation"))===null||i===void 0?void 0:i.shadowRoot)===null||r===void 0?void 0:r.querySelector("cib-suggestion-bar");u&&u.setAttribute("visible","true");lt=!0},100)})}if(p=!1,ht&&ht.indexOf('{"messages":')==0&&(a=JSON.parse(ht),a.messages)){p=!0;var fi=SydFSCHelper.getQuery(),e=[{author:"user",text:fi}],s=a.messages;if(s.length)for(f=0;f<s.length;f++)s[f]&&"messageType"in s[f]&&!s[f].messageType&&delete s[f].messageType;if(e=e.concat(s),wi&&(ei=JSON.parse('{"hiddenText": "","author": "bot","contentOrigin": "DeepLeo"}'),e.push(ei)),nr)for(f=0;f<e.length;f++)e[f].author=="bot"&&e[f].contentOrigin&&(e[f].contentOrigin="CachedEntry",oi=/\[\^\d+\^\]/g,e[f].text=(it=e[f].text)===null||it===void 0?void 0:it.replace(oi,""));if(a.messages=e,si=SydFSCHelper.getConfigOrDefault(_w._enableCachedSpeed,!1),at=SydFSCHelper.getConfigOrDefault(_w._cachedSpeed,-1),gi)CIB.config.messaging.streamCachedResponses=!1,n.setAttribute("cached","");else if(si&&at>0){hi=CIB.config.messaging.messageBufferWorkerStreamDelayMS;ci=CIB.config.features.enableOnProcessingCompleteEvent;CIB.config.messaging.messageBufferWorkerStreamDelayMS=at;CIB.config.features.enableOnProcessingCompleteEvent=!0;CIB.onResponseRendered(function(){CIB.config.messaging.messageBufferWorkerStreamDelayMS=hi;CIB.config.features.enableOnProcessingCompleteEvent=ci})}SydFSCHelper.processCachedResponseUsingCIB(a);SydFSCHelper.lastQuery=fi.toLowerCase().trim()}v=_ge("b_sydtgmin");li=!p&&!v&&!SydFSCHelper.isSmoothConvSwitchUpdatedPage();li&&r(ct);v&&sj_be(v,"click",function(){p||SydFSCHelper.isSmoothConvSwitchUpdatedPage()||r(ct);v.remove();o===null||o===void 0?void 0:o.classList.remove("b_hide");sj_log2("Click","SemanticSerpMinimized:ExpandClick","RightRail","SemanticSerp",null,null,{});SydFSCHelper.LogIntEvent("SemanticSerpMinimized","RightRail",{source:"Expand"})})}sb_st(function(){var i,r,t=(i=n===null||n===void 0?void 0:n.shadowRoot)===null||i===void 0?void 0:i.querySelector("cib-slim-header"),u;t&&(u=(r=t===null||t===void 0?void 0:t.shadowRoot)===null||r===void 0?void 0:r.querySelector("button"),u&&sj_be(u,"click",function(){sj_evt.fire("showSydFSC");SydFSCHelper.LogIntEvent("ConversationViewEnter","RightRail",{source:"Expand"})}))},0);ai=location.search.indexOf("?");vi=location.search.slice(ai+1).split("&").indexOf("iscopilotedu=1")>=0;(vi||gt=="waitlist"||yi)&&(l=sj_ce("style"),l.textContent='\n                cib-suggestion-bar {\n                    display: none;\n                }\n                :host([serp-slot="pole"]) .content .main, :host([serp-slot="top"]) .content .main, :host([serp-slot="right-rail"]) .content .main {\n                    padding-bottom: 20px;\n                }\n            ',vt=(ut=(rt=n===null||n===void 0?void 0:n.shadowRoot)===null||rt===void 0?void 0:rt.querySelector("cib-conversation"))===null||ut===void 0?void 0:ut.shadowRoot,vt&&vt.appendChild(l));h=_ge("sydwrap_wrapper");h&&h.querySelector("#b_sydTigerCont")&&(h.style.background="unset",h.style.border="unset",h.style.boxShadow="unset");di&&(c=(ft=n===null||n===void 0?void 0:n.shadowRoot)===null||ft===void 0?void 0:ft.querySelector("cib-see-more-container"),c&&(yt=sj_ce("style"),yt.textContent="button { display: none !important; }",c.style.setProperty("--max-height","4000px"),(et=c===null||c===void 0?void 0:c.shadowRoot)===null||et===void 0?void 0:et.appendChild(yt)),y=(ot=n===null||n===void 0?void 0:n.shadowRoot)===null||ot===void 0?void 0:ot.querySelector("cib-conversation"),y&&(pt=sj_ce("style"),pt.textContent="cib-suggestion-bar { overflow: hidden; height: 34px; }",(st=y===null||y===void 0?void 0:y.shadowRoot)===null||st===void 0?void 0:st.appendChild(pt)));ir&&(CIB.config.features.enableNeutralBackgroundForSeeMore=!0);sj_evt.fire("sydTigerLoaded")}function r(n){var i,r,t=SydFSCHelper.getQuery(),u,f,e;t&&(n&&CIB.config.sydney.request.optionsSets.push("nocacheread"),u=SydFSCHelper.getConfigOrDefault((i=_w._sydConvConfig)===null||i===void 0?void 0:i.enableSQMsg,!1),!u||CIB.manager.conversation._lastMessage||CIB.manager.conversation.messages.length?CIB.addMessage(t):(f=SydFSCHelper.getConfigOrDefault((r=_w._sydConvConfig)===null||r===void 0?void 0:r.enableTigerEnhancedPrompt,!1),f?(e=SydFSCHelper.createIntelligentQuery(t),CIB.sendHiddenSearchQuery(e,t)):CIB.sendSearchQuery(t)),SydFSCHelper.lastQuery=t.toLowerCase().trim())}function u(){var i,r,u,f,t,e,o;_w._enableTigerSeeMoreCustomStyle&&(t=(i=n===null||n===void 0?void 0:n.shadowRoot)===null||i===void 0?void 0:i.querySelector("cib-see-more-container"),e=sj_ce("style"),e.textContent=".cover button { color: rgb(128, 128, 128); background:white; box-shadow: 0px 0.3px 0.9px rgba(0, 0, 0, 0.12), 0px 1.6px 3.6px rgba(0, 0, 0, 0.16);}",(r=t===null||t===void 0?void 0:t.shadowRoot)===null||r===void 0?void 0:r.appendChild(e),o=sj_ce("style"),o.textContent="svg path{ fill:rgb(128, 128, 128); }",(f=(u=t===null||t===void 0?void 0:t.shadowRoot.querySelector("button svg-icon"))===null||u===void 0?void 0:u.shadowRoot)===null||f===void 0?void 0:f.appendChild(o))}var t="b_sydTigerCont",n=null;sj_evt.bind("sydFSCLoaded",function(){i(!1)},!0);sj_evt.bind("sydFSCPaywallLoaded",function(){i(!0)},!0);sj_evt.bind("onP1",u)})()