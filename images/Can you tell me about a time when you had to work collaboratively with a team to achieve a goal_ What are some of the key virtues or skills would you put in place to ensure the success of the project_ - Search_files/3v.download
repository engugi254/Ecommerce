var __assign=this&&this.__assign||function(){return __assign=Object.assign||function(n){for(var t,r,i=1,u=arguments.length;i<u;i++){t=arguments[i];for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},__assign.apply(this,arguments)},__awaiter=this&&this.__awaiter||function(n,t,i,r){function u(n){return n instanceof i?n:new i(function(t){t(n)})}return new(i||(i=Promise))(function(i,f){function o(n){try{e(r.next(n))}catch(t){f(t)}}function s(n){try{e(r["throw"](n))}catch(t){f(t)}}function e(n){n.done?i(n.value):u(n.value).then(o,s)}e((r=r.apply(n,t||[])).next())})},__generator=this&&this.__generator||function(n,t){function o(n){return function(t){return s([n,t])}}function s(o){if(e)throw new TypeError("Generator is already executing.");while(f&&(f=0,o[0]&&(r=0)),r)try{if(e=1,u&&(i=o[0]&2?u["return"]:o[0]?u["throw"]||((i=u["return"])&&i.call(u),0):u.next)&&!(i=i.call(u,o[1])).done)return i;(u=0,i)&&(o=[o[0]&2,i.value]);switch(o[0]){case 0:case 1:i=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++;u=o[1];o=[0];continue;case 7:o=r.ops.pop();r.trys.pop();continue;default:if(!(i=r.trys,i=i.length>0&&i[i.length-1])&&(o[0]===6||o[0]===2)){r=0;continue}if(o[0]===3&&(!i||o[1]>i[0]&&o[1]<i[3])){r.label=o[1];break}if(o[0]===6&&r.label<i[1]){r.label=i[1];i=o;break}if(i&&r.label<i[2]){r.label=i[2];r.ops.push(o);break}i[2]&&r.ops.pop();r.trys.pop();continue}o=t.call(n,r)}catch(s){o=[6,s];u=0}finally{e=i=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},e,u,i,f;return f={next:o(0),"throw":o(1),"return":o(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f},__spreadArray=this&&this.__spreadArray||function(n,t,i){if(i||arguments.length===2)for(var r=0,f=t.length,u;r<f;r++)!u&&r in t||(u||(u=Array.prototype.slice.call(t,0,r)),u[r]=t[r]);return n.concat(u||Array.prototype.slice.call(t))},GlobalActionMenuV2Wrapper;(function(){function ai(n,t){n&&t&&pi(n,__assign(__assign({},t),{LoadingUI:!0}))}function vi(n,t){n&&t&&(ir(n,t),t.ElementToBindHoverEvent&&rr(n,t.ElementToBindHoverEvent),t.ElementForScreenshot&&ur(n,t.ElementForScreenshot),t.LoadingUI&&setTimeout(function(){return st(n)},window.domtoimage?50:300),r(n,"UpdateShareCommonControl"))}function et(i,u){var f,e,o,s,h;i&&i.getAttribute(d)!=="1"&&(f=t(i),f)&&(n[f]=n[f]||{},u&&u.ElementToBindHoverEvent?n[f].ElementToBindHoverEvent=u.ElementToBindHoverEvent:(e=i.getAttribute(k),e&&(o=_d.getElementById(e),o&&(n[f].ElementToBindHoverEvent=o))),u&&u.ElementForScreenshot?n[f].ElementForScreenshot=u.ElementForScreenshot:(s=i.getAttribute(c),s&&(h=_d.getElementById(s),h&&(n[f].ElementForScreenshot=h))),wi(i),sj_evt.fire("GlobalActionMenuV2Wrapper.InitShareActions",i),r(i,"InitShareCommonControl"),i.setAttribute(d,"1"))}function y(n,i,r){if(n&&i){var u=t(n);u&&e(n,i,r)}}function yi(n){n&&o(n)}function pi(n,t){var s,i,u,f;if(n&&t&&typeof sj_ajax!="undefined"&&sj_ajax){s=t.ScenarioNameUsedForLog?t.ScenarioNameUsedForLog:"Default_Default";r(s,"RenderShareCommonControl");i="";for(u in t)(typeof t[u]=="string"||typeof t[u]=="boolean")&&(i+="".concat(u,"=").concat(encodeURIComponent(t[u]),"&"));i&&(i="?"+i);var e,o="/sharing/getsharecommoncontrol"+i,h=o.indexOf("?")===-1?"?":"&",c=["addloginsource","client","clientip","corpnet","features","hose","hoseassistant","logjserror","msamock","setvar","testhooks","theme","uncrunched","ptn","webthemedark","darkschemeovr"];for(f=0;f<c.length;f++)(e=location.href.match(new RegExp("[?&]"+c[f]+"=[^?&#]*","i")))&&e[0]&&(o+=h+e[0].substring(1),h="&");sj_ajax(o,{callback:function(i,u){if(i&&u){u.appendTo(n);var f=void 0,e=u.request.responseText.match(/data-menuid=(\"|\')([^\s\"\']+)(\"|\')/),o=(e===null||e===void 0?void 0:e.length)>=4?e[2]:"";if(!o)return;if(f=n.querySelector("span[".concat(l,'="').concat(o,'"]')),!f)return;r(f,"RenderShareCommonControlSuccess");et(f,t);t.ShowActionMenuContentAfterLoaded&&t.ElementToTriggerShowActionMenuContentAfterLoaded&&y(f,t.ElementToTriggerShowActionMenuContentAfterLoaded)}}})}}function wi(i){var r=t(i);r&&(bi(i),(er(i)||n[r].ElementToBindHoverEvent)&&(di(i),tr(i)))}function bi(n){var t=i(n);sj_be(t,"keydown",function(t){return ki(t,n)})}function ki(n,t){var f,e,r,u,o,h,s;n&&n.key==="Tab"&&(r=document.activeElement,r&&r.nodeName==="CIB-SERP"&&(r=(f=r===null||r===void 0?void 0:r.shadowRoot)===null||f===void 0?void 0:f.activeElement,r&&r.nodeName==="CIB-HOVER"&&(r=(e=r===null||r===void 0?void 0:r.shadowRoot)===null||e===void 0?void 0:e.activeElement)),u=i(t),(u===null||u===void 0?void 0:u.contains(r))&&(o=t.querySelectorAll("[tabindex='0']"),h=o[o.length-1],r.isEqualNode(h)&&(s=lt(t),s&&(s.focus(),n.preventDefault()))))}function di(i){var f=t(i),r,o,s,u;f&&(r=p(i),r&&(sj_be(r,"click",function(){return e(i,r)}),AccessibilityHelpers.activateButtonByKey(r,[13,32],function(){return e(i,r)})),o=Lib.CssClass.contains(i,ni),s=!o,s&&(u=n[f].ElementToBindHoverEvent,u||(u=r),ot(i,u)))}function ot(i,r){var f,u,o,s;i&&r&&(f=t(i),f)&&(o=function(){u&&clearTimeout(u);u=setTimeout(function(){return e(i,r)},500)},s=function(){u&&(clearTimeout(u),u=null)},sj_be(r,"mouseenter",o),sj_be(r,"mouseleave",s),n[f].onMouseEnter=o,n[f].onMouseLeave=s)}function st(i){var r,u,f=t(i);f&&(((r=n[f])===null||r===void 0?void 0:r.ElementForScreenshot)||i.getAttribute(c)||i.getAttribute(g)?sj_evt.fire(ci,i,(u=n[f])===null||u===void 0?void 0:u.ElementForScreenshot):(sj_evt.fire("GlobalActionMenuV2Wrapper:ScreenshotSkipped",i),ct(i)))}function e(n,t,r){var u=i(n),o=Lib.CssClass.contains(t,s),e=Lib.CssClass.contains(u,f),c=!e&&Lib.CssClass.contains(u,h),l=e||c!=o;l&&(sj_evt.fire(a),gi(n,t),(r===null||r===void 0?void 0:r.noScreenshot)||st(n))}function gi(n,t){var u=i(n),v,c,o,e,y,l,a;if(u){for(Lib.CssClass.add(n,b),v=Lib.CssClass.contains(t,s),v&&Lib.CssClass.add(u,h),Lib.CssClass.remove(u,w),Lib.CssClass.remove(u,f),c=u.getElementsByClassName(pt),o=0;o<c.length;o++)e=c[o],Lib.CssClass.remove(e,bt),Lib.CssClass.remove(e,kt),Lib.CssClass.add(e,wt),y=e.getElementsByClassName(gt),l=y[0],l&&(l.innerText="");nr(n,t,li);a=lt(n);a&&a.focus();r(n,"OpenMenu");sj_evt.fire("GlobalActionMenuV2Wrapper:ActionMenuContentOpened",n)}}function nr(n,t,r){var u;if(n&&t&&n.getAttribute("data-disposamc")!=="true"&&(u=i(n),u)){var v=t.getBoundingClientRect(),o=t.offsetWidth?t.offsetWidth:0,s=t.offsetHeight?t.offsetHeight:0,e=v.left,h=_w.innerWidth-e-o,c=v.top,y=_w.innerHeight-c-s;u.style.position="fixed";e>h?e+o<r?(u.style.left="0",u.style.right=""):(u.style.left="",u.style.right=h+"px"):h+o<r?(u.style.left="",u.style.right="0"):(u.style.left=e+"px",u.style.right="");c>y?(u.style.top="",u.style.bottom=y+s+"px"):(u.style.top=c+s+"px",u.style.bottom="");var p=n.getBoundingClientRect(),f=u.getBoundingClientRect(),l=f.left-p.left,w=f.left,a=f.top-p.top,b=f.top;u.style.position="absolute";u.style.left=l+"px";u.style.top=a+"px";u.style.right="";u.style.bottom="";f=u.getBoundingClientRect();l+=w-f.left;a+=b-f.top;u.style.left=l+"px";u.style.top=a+"px"}}function tr(n){var t,r;sj_evt.bind(a,function(){return o(n)});sj_be(_d,"touchstart",ht);sj_be(_d,"click",ht);t=p(n);t&&(sj_be(t,"touchstart",function(n){return n.stopPropagation()}),sj_be(t,"click",function(n){return n.stopPropagation()}),AccessibilityHelpers.activateButtonByKey(t,[27],function(){return o(n)}));r=i(n);sj_be(r,"touchstart",function(n){return n.stopPropagation()});sj_be(r,"click",function(n){return n.stopPropagation()});AccessibilityHelpers.activateButtonByKey(r,[27],function(){return o(n)})}function ht(){sj_evt.fire(a)}function o(n){var t=i(n),u,e,o;t&&!Lib.CssClass.contains(t,f)&&(sj_evt.fire("GlobalActionMenuV2Wrapper.ResetScreenshot",n,t),Lib.CssClass.add(t,f),Lib.CssClass.add(t,w),Lib.CssClass.remove(t,h),Lib.CssClass.remove(n,b),u=n.querySelector(tt),e=n.querySelector(it),e===null||e===void 0?void 0:e.classList.remove(rt),u===null||u===void 0?void 0:u.classList.add(ut),o=p(n),o&&o.focus(),r(n,"CloseMenu"),sj_evt.fire("GlobalActionMenuV2Wrapper:ActionMenuContentClosed",n))}function ct(n){if(n){var u=n.querySelector(v),t=n.querySelector(tt),i=n.querySelector(it);t&&i&&u&&(i.classList.add(rt),t.classList.remove(ut),r(n,"DismissLoadingUI"),sj_evt.fire("GlobalActionMenuV2Wrapper:LoadingUIDismissed",n))}}function ir(n,t){var i,u,r;t.ScreenshotThumbnailId&&n.setAttribute(g,t.ScreenshotThumbnailId);t.DisplayMode&&n.setAttribute(ri,t.DisplayMode);i=fr(n);i&&(t.CustomizedTitle&&(u=n.getElementsByClassName(dt),r=u[0],r&&(r.innerText=t.CustomizedTitle),i.setAttribute(oi,t.CustomizedTitle)),t.CustomizedContent&&(i.setAttribute(ui,t.CustomizedContent),i.setAttribute(ei,t.CustomizedContent),i.setAttribute(si,t.CustomizedContent)),t.ShareDataSafetyHash&&i.setAttribute(fi,t.ShareDataSafetyHash),t.UrlOverride&&i.setAttribute(hi,t.UrlOverride))}function rr(i,r){var e,o,s,u,l,f,h,c;i&&r&&(u=t(i),u)&&(l=i.getAttribute(k),l)&&(f=(e=n[u])===null||e===void 0?void 0:e.ElementToBindHoverEvent,f)&&(h=(o=n[u])===null||o===void 0?void 0:o.onMouseEnter,h&&(sj_ue(f,"mouseenter",h),n[u].onMouseEnter=null),c=(s=n[u])===null||s===void 0?void 0:s.onMouseLeave,c&&(sj_ue(f,"mouseenter",c),n[u].onMouseLeave=null),n[u].ElementToBindHoverEvent=r,ot(i,r))}function ur(i,r){var u,f;i&&r&&(u=t(i),u)&&(f=i.getAttribute(c),f)&&(n[u].ElementForScreenshot=r)}function fr(n){if(n!==null&&n!==void 0)return n.querySelector("."+ti)}function lt(n){if(n!==null&&n!==void 0)return n.querySelector("."+yt)}function i(n){if(n!==null&&n!==void 0)return n.querySelector("."+vt)}function p(n){if(n!==null&&n!==void 0)return n.querySelector("."+s)}function er(n){if(n!==null&&n!==void 0)return n.querySelector("."+ii)}function t(n){return(n===null||n===void 0?void 0:n.getAttribute(l))||""}function r(n,t,i,r){var o=typeof n=="string"?n:n===null||n===void 0?void 0:n.getAttribute("data-scenario"),u,s,c,h,e,f,l;if(Log&&Log.Log&&o){if(t="GAMV2."+t,u=["Namespace",or(o),"Scenario",o],i&&(u.push("ShareType"),u.push(i)),r)for(f in r)r.hasOwnProperty(f)&&r[f]&&(u.push(f),u.push(r[f]));if(s=o.indexOf("Codex_")===0?"Codex":"CI",s==="Codex"){for(c=["Namespace"],h={},e=0;e<u.length&&e+1<u.length;e+=2)f=u[e],l=u[e+1],c.indexOf(f)===-1&&(h[f]=l);u.push("CustomData");u.push(JSON.stringify(h))}Log.Log.apply(Log,__spreadArray(["InteractionEvent",s,t,!1],u,!1))}}function or(n){switch(n){case"Codex_ConversationMode":return"Conversation";case"Codex_SemanticSerp":return"RightRail";case"Codex_CreatorMode":return"Creator";case"Codex_Others":return"Codex_Others";default:return"Others"}}var at=this,vt="actionmenucontent",yt="shareheader_label",pt="ga_cpy_block",wt="ga_cpy_block_step0",bt="ga_cpy_block_step1",kt="ga_cpy_block_step2",dt="ga_cpy_title_step0",gt="ga_cpy_title_step1",f="hiddenmenu",ni="actionmenumobile",w="nonemenu",b="openmenu",ti="b_sharedata",s="shareactionexp",h="sharemenu",ii="topactions",ri="data-displaymode",c="data-screenshotid",k="data-hoverid",d="data-initialized",l="data-menuid",g="data-thumbnailid",ui="data-sd",fi="data-ht",ei="data-im",oi="data-st",si="data-tt",hi="data-uo",nt="GlobalActionMenuV2Wrapper.Binded",a="largeMenuDismiss",ci="GlobalActionMenuV2Wrapper.Screenshot",u="GlobalActionMenuV2Wrapper.Trigger",v=".share-content-container",tt="".concat(v," > :first-child"),it="".concat(v," > :last-child"),rt="display-none",ut="content-disabled",li=430,ft=!1,n={};sj_evt.bind(nt,function(){ft=!0},!0);ft||(sj_evt.fire(nt),sj_evt.bind("GlobalActionMenuV2Wrapper.Create",function(n){var t=n[1],i=n[2];sj_evt.bind(u,function(){return ai(t,i)},!0)},!0),sj_evt.bind("GlobalActionMenuV2Wrapper.Update",function(n){var t=n[1],i=n[2];sj_evt.bind(u,function(){return vi(t,i)},!0)},!0),sj_evt.bind("GlobalActionMenuV2Wrapper.Init",function(n){var t,i;typeof n[1]=="string"?(i=n[1],t=_d.querySelector("span[".concat(l,'="').concat(i,'"]'))):t=n[1];sj_evt.bind(u,function(){return et(t)},!0)},!0),sj_evt.bind("GlobalActionMenuV2Wrapper.ShowActionMenuContent",function(n){var t=n[1],i=n[2];sj_evt.bind(u,function(){return y(t,i)},!0)},!0),sj_evt.bind("GlobalActionMenuV2Wrapper.HideActionMenuContent",function(n){var t=n[1];sj_evt.bind(u,function(){return yi(t)},!0)},!0),sj_evt.bind("GlobalActionMenuV2Wrapper.ShowActionMenuContentWithLoadingUI",function(n){var t=n[1],i=n[2];sj_evt.bind(u,function(){return y(t,i,{noScreenshot:!0})},!0)},!0),sj_evt.bind("GlobalActionMenuV2Wrapper:ScreenshotCompleted",function(n){return __awaiter(at,void 0,void 0,function(){var t;return __generator(this,function(){return(t=n[1],!t)?[2]:(ct(t),[2])})})},!0))})(GlobalActionMenuV2Wrapper||(GlobalActionMenuV2Wrapper={}))